{
  "version": "1.0.0",
  "description": "Scaffold plan for deterministic file generation",
  "outputDir": "output/app",
  "phases": [
    {
      "id": "phase0_scaffold",
      "desc": "Create project skeleton + deps + configs",
      "creates": [
        "package.json",
        "tsconfig.json",
        "next.config.mjs",
        ".env.example",
        "README.md",
        "docker-compose.yml",
        "Dockerfile"
      ]
    },
    {
      "id": "phase1_ui_library",
      "desc": "Copy/attach UI kit + theme tokens + manifests",
      "creates": [
        "packages/ui/components/*",
        "packages/ui/tokens/*",
        "packages/ui/styles/*"
      ]
    },
    {
      "id": "phase2_db_prisma",
      "desc": "Generate Prisma schema + migrations + seed",
      "creates": [
        "prisma/schema.prisma",
        "prisma/migrations/*",
        "prisma/seed.ts"
      ]
    },
    {
      "id": "phase3_api_routes",
      "desc": "Generate REST endpoints + RBAC + tenant guard",
      "creates": [
        "src/app/api/_core/auth.ts",
        "src/app/api/_core/rbac.ts",
        "src/app/api/_core/tenant.ts",
        "src/app/api/_core/query.ts",
        "src/app/api/_core/errors.ts",
        "src/app/api/_core/audit.ts",
        "src/app/api/{entity}/route.ts",
        "src/app/api/{entity}/[id]/route.ts",
        "src/app/api/{entity}/bulk/route.ts",
        "src/app/api/{entity}/export/route.ts"
      ]
    },
    {
      "id": "phase4_app_routes",
      "desc": "Generate Next app routes + screens from app-spec",
      "creates": [
        "src/app/(auth)/login/page.tsx",
        "src/app/(app)/layout.tsx",
        "src/app/(app)/page.tsx",
        "src/app/(app)/{route}/page.tsx",
        "src/app/(app)/{route}/[id]/page.tsx",
        "src/app/(app)/{route}/new/page.tsx",
        "src/app/(app)/{route}/[id]/edit/page.tsx"
      ]
    },
    {
      "id": "phase5_marketing_pages",
      "desc": "Generate marketing pages using sections library",
      "creates": [
        "src/app/(marketing)/layout.tsx",
        "src/app/(marketing)/page.tsx",
        "src/app/(marketing)/pricing/page.tsx",
        "src/app/(marketing)/docs/page.tsx"
      ]
    },
    {
      "id": "phase6_quality_gate",
      "desc": "Attach quality + diversity + snapshot logs",
      "creates": [
        "logs/generations/{ts}/prompt.txt",
        "logs/generations/{ts}/classifier.json",
        "logs/generations/{ts}/product-spec.json",
        "logs/generations/{ts}/app-spec.json",
        "logs/generations/{ts}/backend-spec.json",
        "logs/generations/{ts}/quality.json"
      ]
    }
  ]
}

