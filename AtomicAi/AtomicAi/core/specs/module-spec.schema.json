{
  "$schema": "http://json-schema.org/draft/2020-12/schema",
  "title": "Module Specification Schema",
  "description": "Specification for ERP/SaaS modules with entities, views, and permissions",
  "type": "object",
  "required": ["id", "name", "type", "entities"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique module identifier (e.g., 'crm', 'invoices')"
    },
    "name": {
      "type": "string",
      "description": "Module display name"
    },
    "type": {
      "type": "string",
      "enum": ["crm", "inventory", "sales", "purchases", "hr", "accounting", "reports", "admin", "custom"],
      "description": "Module type/category"
    },
    "icon": {
      "type": "string",
      "description": "Icon identifier or path"
    },
    "description": {
      "type": "string",
      "description": "Module description"
    },
    "menuOrder": {
      "type": "number",
      "description": "Order in navigation menu"
    },
    "entities": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Entity IDs belonging to this module"
    },
    "routes": {
      "type": "object",
      "description": "Module routes configuration",
      "properties": {
        "base": {
          "type": "string",
          "description": "Base route path (e.g., '/crm')"
        },
        "list": { "type": "string", "default": "" },
        "create": { "type": "string", "default": "/new" },
        "edit": { "type": "string", "default": "/:id/edit" },
        "details": { "type": "string", "default": "/:id" }
      }
    },
    "permissions": {
      "type": "object",
      "description": "Module-level permissions",
      "properties": {
        "view": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Roles that can view this module"
        },
        "manage": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Roles that can manage this module"
        }
      }
    },
    "uiPresets": {
      "type": "object",
      "description": "UI configuration presets",
      "properties": {
        "density": {
          "type": "string",
          "enum": ["compact", "comfortable", "airy"],
          "default": "comfortable"
        },
        "tableStyle": {
          "type": "string",
          "enum": ["bordered", "striped", "minimal"],
          "default": "minimal"
        },
        "cardStyle": {
          "type": "string",
          "enum": ["flat", "elevated", "outlined"],
          "default": "elevated"
        }
      }
    },
    "features": {
      "type": "object",
      "description": "Module feature flags",
      "properties": {
        "export": { "type": "boolean", "default": true },
        "import": { "type": "boolean", "default": false },
        "bulkActions": { "type": "boolean", "default": true },
        "advancedFilters": { "type": "boolean", "default": true },
        "savedViews": { "type": "boolean", "default": true },
        "activityLog": { "type": "boolean", "default": true },
        "comments": { "type": "boolean", "default": false },
        "workflows": { "type": "boolean", "default": false }
      }
    },
    "platformAdaptations": {
      "type": "object",
      "description": "Platform-specific adaptations",
      "properties": {
        "web": {
          "type": "object",
          "properties": {
            "defaultView": {
              "type": "string",
              "enum": ["table", "cards", "kanban"],
              "default": "table"
            }
          }
        },
        "mobile": {
          "type": "object",
          "properties": {
            "defaultView": {
              "type": "string",
              "enum": ["list", "cards"],
              "default": "list"
            },
            "useBottomSheet": { "type": "boolean", "default": true },
            "useSwipeActions": { "type": "boolean", "default": true }
          }
        },
        "desktop": {
          "type": "object",
          "properties": {
            "defaultView": {
              "type": "string",
              "enum": ["table", "split"],
              "default": "table"
            },
            "multiSelect": { "type": "boolean", "default": true },
            "contextMenu": { "type": "boolean", "default": true },
            "keyboardShortcuts": { "type": "boolean", "default": true }
          }
        }
      }
    }
  }
}

