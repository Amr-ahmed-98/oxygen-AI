{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Build Plan Schema",
  "description": "Schema for build-plan.json - defines the structure of generated projects",
  "type": "object",
  "required": ["target", "platform", "persona", "apps", "atoms", "blocks"],
  "properties": {
    "target": {
      "type": "string",
      "enum": ["hybrid", "erp", "marketing"],
      "description": "Application target type"
    },
    "platform": {
      "type": "string",
      "enum": ["web", "mobile", "desktop"],
      "description": "Target platform"
    },
    "persona": {
      "type": "string",
      "enum": ["enterprise", "minimal", "neon", "glass", "startup"],
      "description": "Design persona/theme"
    },
    "rtl": {
      "type": "boolean",
      "description": "Right-to-left language support"
    },
    "webFramework": {
      "type": "string",
      "enum": ["react", "vue", "svelte", "angular"],
      "description": "Web framework (if platform is web)"
    },
    "mobileFramework": {
      "type": "string",
      "enum": ["react-native", "flutter", "swiftui", "compose"],
      "description": "Mobile framework (if platform is mobile)"
    },
    "desktopFramework": {
      "type": "string",
      "enum": ["electron", "tauri", "maui", "wails"],
      "description": "Desktop framework (if platform is desktop)"
    },
    "backendPack": {
      "type": "string",
      "enum": ["node", "python", "dotnet", "java", "php"],
      "description": "Backend pack (optional)"
    },
    "apps": {
      "type": "array",
      "description": "List of applications to generate",
      "items": {
        "type": "object",
        "required": ["name", "platform", "adapter"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Application name"
          },
          "platform": {
            "type": "string",
            "enum": ["web", "mobile", "desktop"]
          },
          "adapter": {
            "type": "string",
            "enum": ["antd", "shadcn", "react-native"]
          },
          "framework": {
            "type": "string",
            "description": "Framework (react, vue, react-native, etc.)"
          },
          "pages": {
            "type": "array",
            "items": { "type": "string" },
            "description": "List of page names"
          },
          "routes": {
            "type": "array",
            "items": { "type": "string" },
            "description": "List of routes (e.g., ['/', '/dashboard'])"
          },
          "blocks": {
            "type": "array",
            "items": { "type": "string" },
            "description": "List of block IDs to use"
          }
        }
      }
    },
    "atoms": {
      "type": "object",
      "description": "Atom component configuration",
      "patternProperties": {
        "^[a-zA-Z]+$": {
          "type": "object",
          "properties": {
            "variantId": {
              "type": "string",
              "description": "Variant ID from catalog"
            }
          }
        }
      }
    },
    "blocks": {
      "type": "object",
      "properties": {
        "marketing": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Marketing block IDs"
        },
        "erp": {
          "type": "array",
          "items": { "type": "string" },
          "description": "ERP block IDs"
        }
      }
    }
  }
}

